import { useMutation } from "@tanstack/react-query"
import Navbar from "../components/Navbar"
import { useUserStore } from "../store/userStore"
import { updateUserDetails } from "../client/apiClient"
import { useForm } from "react-hook-form"
import { updateUserType } from "../utils/types"

export interface updateUser {
  userId: string
  details: updateUserType
}
const Profile = () => {
  const { username, email } = useUserStore()

  const mutation = useMutation({
    mutationKey: ["updateUserDetails"],
    mutationFn: updateUserDetails,
  })

  const {
    register,
    formState: { errors },
    handleSubmit,
  } = useForm<updateUserType>()

  const onSubmit = handleSubmit((data: updateUser) => {
    mutation.mutateAsync(data)
  })

  return (
    <>
      <Navbar />
      <div className="flex flex-col justify-center space-y-5">
        <div>
          <h3 className="text-center font-bold text-3xl">Profile Page</h3>
          <form onSubmit={onSubmit}>
            <div className="flex items-center">
              <div className="flex">
                <h3 className="font-bold">Username: {"  "}</h3>
                <input value={username} />
              </div>
              <h3 className="font-bold">Email: {"  "}</h3>
              <input value={email} />
            </div>
            <button type="submit">Submit</button>
          </form>
        </div>
      </div>
    </>
  )
}

export default Profile
